<?xml version="1.0"?>
<!-- Generated by Docutils 0.19 -->
<section xml:id="this-keyword">
    <title>this Keyword</title>
    <p>The keyword <term>this</term> can be used in a class to refer to the current calling object.</p>
    <p>For example, in the following Class Person, when we create an object p1 and call the constructor or p1.setEmail(), the word “this” refers to p1. And when we make the same method calls with object p2, “this” refers to p2.
            Run the code below and also check it out in the <raw format="html" xml:space="preserve"><a href="http://www.pythontutor.com/visualize.html#code=%20public%20class%20Person%20%0A%20%20%7B%0A%20%20%20%20%20//%20instance%20variables%20%0A%20%20%20%20%20private%20String%20name%3B%0A%20%20%20%20%20private%20String%20email%3B%0A%20%20%20%20%20private%20String%20phoneNumber%3B%0A%20%20%20%20%20%0A%20%20%20%20%20//%20constructor%0A%20%20%20%20%20public%20Person%28String%20theName%29%0A%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20this.name%20%3D%20theName%3B%0A%20%20%20%20%20%7D%0A%20%20%20%20%20%0A%20%20%20%20%20//%20accessor%20methods%20-%20getters%20%0A%20%20%20%20%20public%20String%20getName%28%29%20%7B%20return%20this.name%3B%7D%0A%20%20%20%20%20public%20String%20getEmail%28%29%20%7B%20return%20this.email%3B%7D%0A%20%20%20%20%20public%20String%20getPhoneNumber%28%29%20%7B%20return%20this.phoneNumber%3B%7D%0A%20%20%20%20%20%0A%20%20%20%20%20//%20mutatoor%20methods%20-%20setters%0A%20%20%20%20%20public%20void%20setName%28String%20theName%29%20%7B%20this.name%20%3D%20theName%3B%7D%0A%20%20%20%20%20public%20void%20setEmail%28String%20theEmail%29%20%7Bthis.email%20%3D%20theEmail%3B%7D%0A%20%20%20%20%20public%20void%20setPhoneNumber%28String%20thePhoneNumber%29%20%7B%20this.phoneNumber%20%3D%20thePhoneNumber%3B%7D%0A%20%20%20%20%20public%20String%20toString%28%29%0A%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20return%20this.name%20%2B%20%22%20%22%20%2B%20this.email%20%2B%20%22%20%22%20%2B%20this.phoneNumber%3B%0A%20%20%20%20%20%7D%0A%20%20%20%20%20%0A%20%20%20%20%20//%20main%20method%20for%20testing%0A%20%20%20%20%20public%20static%20void%20main%28String%5B%5D%20args%29%0A%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20Person%20p1%20%3D%20new%20Person%28%22Sana%22%29%3B%0A%20%20%20%20%20%20%20%20System.out.println%28p1%29%3B%0A%20%20%20%20%20%20%20%20Person%20p2%20%3D%20new%20Person%28%22Jean%22%29%3B%0A%20%20%20%20%20%20%20%20p2.setEmail%28%22jean%40gmail.com%22%29%3B%0A%20%20%20%20%20%20%20%20p2.setPhoneNumber%28%22404%20899-9955%22%29%3B%0A%20%20%20%20%20%20%20%20System.out.println%28p2%29%3B%0A%20%20%20%20%20%7D%0A%20%20%7D%0A%20%20&amp;cumulative=false&amp;curInstr=25&amp;heapPrimitives=nevernest&amp;mode=display&amp;origin=opt-frontend.js&amp;py=java&amp;rawInputLstJSON=%5B%5D&amp;textReferences=false&amp;curInstr=0" target="_blank"  style="text-decoration:underline">Java visualizer</a></raw> with the Code Lens button which shows how this refers to different objects when the code is run.</p>
    <note>
            <p>Note that in the code above, this.name, this.email, and this.phoneNumber are equivalent to writing just name, email, and phoneNumber, but <c>this.variable</c> is a way to indicate that we are referring to the instance variables of this object instead of a local variable.</p>
        </note>
    <p>Static methods cannot refer to this or instance variables because they are called with the classname, not an object, so there is no this object.</p>
    <p>The keyword this is sometimes used by programmers to distinguish between variables. Programmers can give the parameter variables the same names as the instance variables and this can distinguish them and avoid a naming conflict. For example, both the instance variable and the parameter variable are called name in the code below.</p>
    <program language="java">
    <input>
// instance variables
private String name;

// constructor
public Person(String name)
{
   // Set this object's instance variable name to the parameter variable name
   this.name = name;
}
</input>
  </program>
    <p>The <term>this</term> variable can be used anywhere you would use an object variable.  You can even pass it to another method as an argument. Consider the classes below, Pay and Overtime. The Pay class declares an Overtime object and passes in <term>this</term> (the current Pay object) to its constructor which computes the overtime with respect to that Pay object. Try this code in the <raw format="html" xml:space="preserve"><a href="http://www.pythontutor.com/visualize.html#code=public%20class%20Pay%0A%20%20%20%7B%0A%20%20%20%20private%20double%20pay%3B%0A%0A%20%20%20%20public%20Pay%28double%20p%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20pay%20%3D%20p%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20public%20double%20getPay%28%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20return%20pay%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20public%20void%20calculatePayWithOvertime%28%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20//%20this%20Pay%20object%20is%20passed%20to%20the%20Overtime%20constructor%0A%20%20%20%20%20%20%20%20Overtime%20ot%20%3D%20new%20Overtime%28this%29%3B%0A%20%20%20%20%20%20%20%20pay%20%3D%20ot.getOvertimePay%28%29%3B%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20public%20static%20void%20main%28String%5B%5D%20args%29%20%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20Pay%20myPay%20%3D%20new%20Pay%28100.0%29%3B%0A%20%20%20%20%20%20%20%20myPay.calculatePayWithOvertime%28%29%3B%0A%20%20%20%20%20%20%20%20System.out.println%28myPay.getPay%28%29%29%3B%0A%20%20%20%20%7D%0A%20%20%20%7D%0A%0A%20%20%20class%20Overtime%0A%20%20%20%7B%0A%20%20%20%20private%20double%20payWithOvertime%3B%0A%0A%20%20%20%20public%20Overtime%28Pay%20p%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20payWithOvertime%20%3D%20p.getPay%28%29%20*%201.5%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20public%20double%20getOvertimePay%28%29%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20return%20payWithOvertime%3B%0A%20%20%20%20%7D%0A%20%20%20%7D&amp;cumulative=false&amp;curInstr=0&amp;heapPrimitives=nevernest&amp;mode=display&amp;origin=opt-frontend.js&amp;py=java&amp;rawInputLstJSON=%5B%5D&amp;textReferences=false"  target="_blank" style="text-decoration:underline"> Java visualizer</a></raw>. Here is an image that shows how this and myPay and all refer to the same object in memory.</p>
    <figure align="center" xml:id="empty-58">
    <image source="ch-sync/thisTrace.png" width="NaN%"/>
  </figure>
 
  <subsection xml:id="_summary-37">
            <title>Summary</title>
            <p><ul>
                <li>
                    <p>Within a non-static method or a constructor, the keyword this is a reference to the current object, the object whose method or constructor is being called.</p>
                </li>
                <li>
                    <p>this.instanceVariable can be used to distinguish between this object’s instance variables and local parameter variables that may have the same variable names.</p>
                </li>
                <li>
                    <p>Static methods do not have a this reference.</p>
                </li>
                <li>
                    <p>The this variable can be used anywhere you would use an object variable, even to pass it to another method as an argument.</p>
                </li>
            </ul></p>
        </subsection>
  

     <subsection xml:id="sec-practice-13">
            <title>Practice</title>

             <exercise label="AP5-9-2">
        <statement>

            <p>Consider the following class definitions.</p>
            <program language="java"><input>
public class Liquid
{
    private int currentTemp;

    public Liquid (int ct)
    {
        currentTemp = ct;
    }

    public int getCurrentTemp()
    {
        return currentTemp;
    }

    public void addToJar(LiquidJar j)
    {
        j.addLiquid(this);
    }
}

public class LiquidJar
{
    private int totalTemp;

    public LiquidJar()
    {
      totalTemp = 0;
    }

    public void addLiquid(Liquid l)
    {
        totalTemp += l.getCurrentTemp();
    }

    public int getTotalTemp()
    {
        return totalTemp;
    }
    // Constructor not shown.
}
</input></program>
            <p>Consider the following code segment, which appears in a class other than Liquid or LiquidJar.</p>
            <program language="java"><input>
Liquid water = new Liquid(50);
Liquid milk = new Liquid(15);

LiquidJar j = new LiquidJar();
water.addToJar(j);
milk.addToJar(j);
System.out.println(j.getTotalTemp());
</input></program>
            <p>What, if anything, is printed out after the execution of the code segment?</p>
</statement><choices><choice><statement id="AP5-9-2_opt_a">            <p>50</p>
</statement><feedback id="AP5-9-2_opt_a">
            <p>The liquid water has a temperature of 50 but more is added to the jar.</p>
</feedback></choice><choice><statement id="AP5-9-2_opt_b">            <p>15</p>
</statement><feedback id="AP5-9-2_opt_b">
            <p>The liquid milk has a temperature of 15 but more is added to the jar.</p>
</feedback></choice><choice correct="yes"><statement id="AP5-9-2_opt_c">            <p>65</p>
</statement><feedback id="AP5-9-2_opt_c">
            <p>Correct! The liquid water with a temperature of 50 and then the liquid milk with a temperature of 15 are added to the jar.</p>
</feedback></choice><choice><statement id="AP5-9-2_opt_d">            <p>Nothing, the code segment attempts to access the private variable currentTemp outside of its scope.</p>
</statement><feedback id="AP5-9-2_opt_d">
            <p>Incorrect. The currentTemp is never used outside its scope.</p>
</feedback></choice><choice><statement id="AP5-9-2_opt_e">            <p>Nothing, the code segment attempts to access the private variable totalTemp outside of its scope.</p>
</statement><feedback id="AP5-9-2_opt_e">
            <p>Incorrect. The totalTemp is never used outside its scope.</p>
</feedback></choice></choices>
    </exercise>
    
    <exercise label="PersonClassThis">
    <statement>
        <p>Observe the use of the keyword this in the code below. Click on the CodeLens button and then forward to see the memory in action.</p>

    </statement>
    <program xml:id="PersonClassThis_editor" interactive="activecode" language="java">

        <input>
public class Person
{
   // instance variables
    private String name;
    private String email;
    private String phoneNumber;

   // constructor
   public Person(String theName)
   {
      this.name = theName;
   }

   // accessor methods - getters
   public String getName() { return this.name;}
   public String getEmail() { return this.email;}
   public String getPhoneNumber() { return this.phoneNumber;}

   // mutator methods - setters
   public void setName(String theName) { this.name = theName;}
   public void setEmail(String theEmail) {this.email = theEmail;}
   public void setPhoneNumber(String thePhoneNumber) { this.phoneNumber = thePhoneNumber;}
   public String toString()
   {
      return this.name + " " + this.email + " " + this.phoneNumber;
   }

   // main method for testing
   public static void main(String[] args)
   {
      Person p1 = new Person("Sana");
      System.out.println(p1);
      Person p2 = new Person("Jean");
      p2.setEmail("jean@gmail.com");
      p2.setPhoneNumber("404 899-9955");
      System.out.println(p2);
   }
}
        </input>
<tests>
 import static org.junit.Assert.*;
    import org.junit.*;
    import java.io.*;

    public class RunestoneTests extends CodeTestHelper
    {
        public RunestoneTests() {
            super("Person");
        }

          @Test
          public void testMain() throws IOException
          {
             String output = getMethodOutput("main");
              String expect = "Sana null null\nJean jean@gmail.com 404 899-9955";

              boolean passed = getResults(expect, output, "Expected output from main", true);
              assertTrue(passed);
          }
    }
</tests>

    </program>
</exercise>
    <exercise label="PayClassThis">
    <statement>
        <p>What does this code print out? Trace through the code with the CodeLens button. Notice how the this Pay object is passed to the Overtime constructor.</p>

    </statement>
    <program xml:id="PayClassThis_editor" interactive="activecode" language="java">

        <input>
public class Pay
{
 private double pay;

 public Pay(double p)
 {
     pay = p;
 }

 public double getPay()
 {
     return pay;
 }

 public void calculatePayWithOvertime()
 {
     // this Pay object is passed to the Overtime constructor
     Overtime ot = new Overtime(this);
     pay = ot.getOvertimePay();
 }

 public static void main(String[] args)
 {
     Pay myPay = new Pay(100.0);
     myPay.calculatePayWithOvertime();
     System.out.println(myPay.getPay());
 }
}

class Overtime
{
 private double payWithOvertime;

 public Overtime(Pay p)
 {
     payWithOvertime = p.getPay() * 1.5;
 }

 public double getOvertimePay()
 {
     return payWithOvertime;
 }
}
        </input>
<tests>
 import static org.junit.Assert.*;
   import org.junit.*;
   import java.io.*;

   public class RunestoneTests extends CodeTestHelper
   {
         @Test
         public void testMain() throws IOException
         {
            String output = getMethodOutput("main");
             String expect = "150.0";

             boolean passed = getResults(expect, output, "Expected output from main", true);
             assertTrue(passed);
         }
   }
</tests>

    </program>
</exercise>
    <exercise label="AP5-9-1">
        <statement>

        <p>Consider the following class definitions.</p>
        <program language="java"><input>
public class Pay
{
 private double pay;

 public Pay(double p)
 {
     pay = p;
 }

 public double getPay()
 {
     return pay;
 }

 public void calculatePayWithOvertime()
 {
     // this Pay object is passed to the Overtime constructor
     Overtime ot = new Overtime(this);
     pay = ot.getOvertimePay();
 }
}

public class Overtime
{
 private double payWithOvertime;

 public Overtime(Pay p)
 {
     payWithOvertime = p.getPay() * 1.5;
 }
 public double getOvertimePay()
 {
     return payWithOvertime;
 }
}
</input></program>
        <p>The following code segment appears in a class other than Pay or Overtime.</p>
        <program language="java"><input>
Pay one = new Pay(20.0);
one.calculatePayWithOvertime();
System.out.println(one.getPay());
</input></program>
        <p>What, if anything, is printed as a result of executing the code segment?</p>
</statement><choices><choice><statement id="AP5-9-1_opt_a">        <p>10.0</p>
</statement><feedback id="AP5-9-1_opt_a">
        <p>The pay starts at 20 and then increases with overtime.</p>
</feedback></choice><choice><statement id="AP5-9-1_opt_b">        <p>15.0</p>
</statement><feedback id="AP5-9-1_opt_b">
        <p>If the pay started at 10, this would be the result.</p>
</feedback></choice><choice><statement id="AP5-9-1_opt_c">        <p>20.0</p>
</statement><feedback id="AP5-9-1_opt_c">
        <p>The pay starts at 20 and then increases with overtime.</p>
</feedback></choice><choice correct="yes"><statement id="AP5-9-1_opt_d">        <p>30.0</p>
</statement><feedback id="AP5-9-1_opt_d">
        <p>Correct! The pay starts at 20 and then increases with overtime by multiplying by 1.5.</p>
</feedback></choice><choice><statement id="AP5-9-1_opt_e">        <p>Nothing is printed because the code will not compile.</p>
</statement><feedback id="AP5-9-1_opt_e">
        <p>Incorrect. The code will compile.</p>
</feedback></choice></choices>
    </exercise>
<exercise label="challenge-5-9-BankAccount">
        <p><ul>
                <li>
                    <p>Create a class called BankAccount below that keeps track of the account holder’s name, the account number, and the balance in the account. Make sure you use the appropriate data types for these.</p>
                </li>
                <li>
                    <p>Write 2 constructors for the class that initialize the instance variables to default values and to given parameters. For the parameters, use the same variable names as your instance variables. Use the <term>this</term> keyword to distinguish between the instance variables and the parameter variables.</p>
                </li>
                <li>
                    <p>Write a toString() method for the class. Use the <term>this</term> keyword to return the instance variables.</p>
                </li>
                <li>
                    <p>Write a withdraw(amount) and deposit(amount) for the class. Withdraw should subtract the amount from the balance as long as there is enough money in the account (the balance is larger than the amount). Deposit should add the amount to the balance.  Use the <term>this</term> keyword to refer to the balance.</p>
                </li>
                <li>
                    <p>Test your class below with a main method that creates a Bank Account object and calls its deposit and withdraw methods and prints out the object to test its toString() method.</p>
                </li>
            </ul></p>

    <statement>
            <p>Create a class called BankAccount that keeps track of the account holder’s name, the account number, and the balance in the account. Create 2 constructors, a toString() method, and withdraw(amount) and deposit(amount) methods. Use the this keyword in the constructor and methods. Test your class in a main method.</p>

    </statement>
    <program xml:id="challenge-5-9-BankAccount_editor" interactive="activecode" language="java">

        <input>
public class BankAccount
{


}
        </input>
<tests>
 import static org.junit.Assert.*;
    import org.junit.*;
    import java.io.*;

    public class RunestoneTests extends CodeTestHelper
    {
          public RunestoneTests() {
              super("BankAccount");
          }

          @Test
          public void test0()
          {
             String output = getMethodOutput("main");
              String expect = "Something like:\nName 101 100.0\nName 101 200.0\nName 101 100.0";

              boolean passed = !output.contains("Method main does not exist");

              getResults(expect, output, "Expected output from main", passed);
              assertTrue(passed);
          }

          @Test
          public void test1()
          {
              String output = checkDefaultConstructor();
              String expect = "pass";

              boolean passed = getResults(expect, output, "Checking default constructor");
              assertTrue(passed);
          }

          @Test
          public void test2()
          {
              String output = checkConstructor(3);
              String expect = "pass";

              boolean passed = getResults(expect, output, "Checking 3-parameter constructor");
              assertTrue(passed);
          }


          @Test
          public void test01()
          {
              String expect = "3 Private";
              String output = testPrivateInstanceVariables();

              boolean passed = getResults(expect, output, "Checking Private Instance Variable(s)");
              assertTrue(passed);
          }

          @Test
          public void test3() {
              String target = "public String toString()";

              boolean passed = checkCodeContainsRegex("toString method", target);
              assertTrue(passed);
          }

          @Test
          public void test41() {
              String target = "public void withdraw(*)";

              boolean passed = checkCodeContainsRegex("withdraw method", target);
              assertTrue(passed);
          }

          @Test
          public void test42() {
              String target = "public void deposit(*)";

              boolean passed = checkCodeContainsRegex("deposit method", target);
              assertTrue(passed);
          }

          @Test
          public void test5() {
              String target = "this.";
              String code = getCode();

              int num = countOccurences(code, target);

              boolean passed = num &gt;= 6;

              getResults("6+", ""+num, "use of this.*", passed);
              assertTrue(passed);
          }
    }
</tests>

    </program>
    </exercise>
  </subsection>
</section>
